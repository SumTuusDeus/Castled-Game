<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CASTLED - Build Your Castle!</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Audio element for background music -->
    <audio id="background-music" loop>
        <source src="audio/background-music.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <div class="game-container">
        <header>
            <h1>CASTLED</h1>
            <div id="game-status">Player 1's Turn</div>
        </header>

        <div class="game-main-area">
            <div class="game-board-container">
                <div class="game-board" id="game-board">
                    <!-- Game board will be generated by JavaScript -->
                </div>
            </div>

            <div class="game-controls-container">
                <div class="game-controls">
                    <button id="roll-button" class="primary-button">Roll Die</button>
                    <div id="die-result" class="die-container">
                        <div class="die">?</div>
                    </div>
                    <button id="music-toggle" class="secondary-button" title="Toggle Music">ðŸ”Š</button>
                </div>

                <div id="action-area" class="action-area">
                    <!-- Action buttons will appear here based on game state -->
                </div>
            </div>
        </div>

        <div class="player-info-container">
            <div class="player-info" id="player1" data-player="1">
                <h2>Player 1</h2>
                <div class="player-resources">
                    <span class="stone-icon">ðŸª¨</span>
                    <span class="stone-count">0</span>
                </div>
                <div class="castle-progress">
                    <h3>Castle Progress</h3>
                    <div class="castle-pieces">
                        <div class="castle-piece"></div>
                        <div class="castle-piece"></div>
                        <div class="castle-piece"></div>
                        <div class="castle-piece"></div>
                        <div class="castle-piece"></div>
                    </div>
                </div>
            </div>
            <div class="player-info" id="player2" data-player="2">
                <h2>Player 2</h2>
                <div class="player-resources">
                    <span class="stone-icon">ðŸª¨</span>
                    <span class="stone-count">0</span>
                </div>
                <div class="castle-progress">
                    <h3>Castle Progress</h3>
                    <div class="castle-pieces">
                        <div class="castle-piece"></div>
                        <div class="castle-piece"></div>
                        <div class="castle-piece"></div>
                        <div class="castle-piece"></div>
                        <div class="castle-piece"></div>
                    </div>
                </div>
            </div>
            <div class="player-info" id="player3" data-player="3">
                <h2>Player 3</h2>
                <div class="player-resources">
                    <span class="stone-icon">ðŸª¨</span>
                    <span class="stone-count">0</span>
                </div>
                <div class="castle-progress">
                    <h3>Castle Progress</h3>
                    <div class="castle-pieces">
                        <div class="castle-piece"></div>
                        <div class="castle-piece"></div>
                        <div class="castle-piece"></div>
                        <div class="castle-piece"></div>
                        <div class="castle-piece"></div>
                    </div>
                </div>
            </div>
            <div class="player-info" id="player4" data-player="4">
                <h2>Player 4</h2>
                <div class="player-resources">
                    <span class="stone-icon">ðŸª¨</span>
                    <span class="stone-count">0</span>
                </div>
                <div class="castle-progress">
                    <h3>Castle Progress</h3>
                    <div class="castle-pieces">
                        <div class="castle-piece"></div>
                        <div class="castle-piece"></div>
                        <div class="castle-piece"></div>
                        <div class="castle-piece"></div>
                        <div class="castle-piece"></div>
                    </div>
                </div>
            </div>
        </div>

        <div id="game-log" class="game-log">
            <h3>Game Events</h3>
            <div id="log-entries" class="log-entries"></div>
        </div>

        <div id="game-modal" class="modal">
            <div class="modal-content">
                <span class="close-button">&times;</span>
                <h2 id="modal-title">Title</h2>
                <div id="modal-body">Content goes here</div>
                <div id="modal-actions">
                    <!-- Action buttons will be added here -->
                </div>
            </div>
        </div>

        <div id="notification" class="notification">
            <p id="notification-text"></p>
        </div>
    </div>

    <div class="help-button" id="help-button">?</div>
    <div id="help-modal" class="modal">
        <div class="modal-content help-content">
            <span class="close-button">&times;</span>
            <h2>How to Play CASTLED</h2>
            <div class="help-section">
                <h3>Objective</h3>
                <p>Be the first player to build your complete castle (5 pieces) and raise your flag!</p>
                
                <h3>Game Flow</h3>
                <ol>
                    <li>Players take turns in clockwise order</li>
                    <li>On your turn, roll the die and move your piece clockwise</li>
                    <li>Perform actions based on the space you land on</li>
                </ol>
                
                <h3>Space Types</h3>
                <ul>
                    <li><strong>Castle Space:</strong> Build a castle piece for 10 stone</li>
                    <li><strong>Resource Space:</strong> Collect 10 or 20 stone</li>
                    <li><strong>Gamble Space:</strong> With 30+ stone, roll even to gain 30 stone, odd to lose 30</li>
                    <li><strong>Battle Space:</strong> Challenge another player - winner takes 10 stone or a castle piece</li>
                </ul>
                
                <h3>Special Rules</h3>
                <ul>
                    <li>If you start your turn in an enemy territory, roll the die - if odd, lose 10 stone</li>
                    <li>If you land on an enemy space, you can roll to make them lose 10 stone or a castle piece</li>
                    <li>Landing on the same space as another player triggers an automatic battle</li>
                    <li>No attacks during the first turn of the game</li>
                    <li>Can't attack an enemy in the same turn as collecting stone in their territory</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Load main.js first to set up the loading mechanism -->
    <script src="main.js"></script>
    <!-- Then load the other scripts -->
    <script src="board.js"></script>
    <script src="player.js"></script>
    <script src="game.js"></script>
    <script src="ui.js"></script>
</body>
</html>
